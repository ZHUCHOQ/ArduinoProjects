# Итоговая таблица подключений для Arduino Nano с TFT-дисплеем, сдвиговыми регистрами и nRF24L01

## Подключение сдвиговых регистров 74HC165 (2 шт.)

|Arduino Nano|74HC165 (Обе микросхемы)|Примечание|
|-|-|-|
|**D8**|SH/LD (пин 1)|Управление загрузкой данных|
|**D2**|CLK (пин 2)|Тактовый сигнал|
|**D6**|QH первого регистра (пин 7)|Данные от первого регистра|
|**GND**|CLK INH (пин 15)|Запрет тактирования|
|**GND**|SER второго регистра (пин 10)|Вход данных второго регистра|
|**+5V**|Vcc (пин 16)|Питание микросхем|
|**GND**|GND (пин 8)|Земля микросхем|

### Каскадное соединение регистров

- **QH второго регистра** (пин 7) → **SER первого регистра** (пин 10)

### Подключение кнопок (16 шт.)

- Каждый вход A-H (пины 11-14 и 3-6) обоих регистров подключен через **резистор 10 кОм к +5V**

- Второй вывод каждой кнопки подключен к **GND**

## Подключение TFT-дисплея ST7789 (240×240)

|Arduino Nano|TFT-дисплей|Примечание|
|-|-|-|
|**D3**|CS|Выбор чипа|
|**D4**|DC|Данные/Команда|
|**D5**|RST|Сброс|
|**D13 (SCK)**|SCL|Тактовый сигнал SPI|
|**D11 (MOSI)**|SDA|Данные SPI|
|**+5V**|BL|Подсветка (через резистор)|
|**+5V**|VCC|Питание дисплея|
|**GND**|GND|Земля дисплея|

## Подключение модуля nRF24L01

|Arduino Nano|nRF24L01|Примечание|
|-|-|-|
|**D9**|CE|Включение модуля|
|**D10**|CSN|Выбор чипа|
|**D13 (SCK)**|SCK|Тактовый сигнал SPI|
|**D11 (MOSI)**|MOSI|Данные SPI (выход)|
|**D12 (MISO)**|MISO|Данные SPI (вход)|
|**+3.3V**|VCC|Питание модуля|
|**GND**|GND|Земля модуля|
|**D7**|IRQ|Прерывание (опционально)|

## Подключение питания

|Arduino Nano|Назначение|
|-|-|
|**+5V**|Шина питания на макетной плате|
|**GND**|Шина земли на макетной плате|
|**+3.3V**|Питание nRF24L01|

## Сводная таблица занятых пинов Arduino Nano

|Пин Arduino|Назначение|
|-|-|
|D0 (RX)|Свободен|
|D1 (TX)|Свободен|
|D2|CLK регистров|
|D3|CS дисплея|
|D4|DC дисплея|
|D5|RST дисплея|
|D6|Данные регистров (QH)|
|D7|IRQ nRF24L01 (опционально)|
|D8|SH/LD регистров|
|D9|CE nRF24L01|
|D10|CSN nRF24L01|
|D11 (MOSI)|MOSI (общий для дисплея и nRF24L01)|
|D12 (MISO)|MISO nRF24L01|
|D13 (SCK)|SCK (общий для дисплея и nRF24L01)|
|A0|Свободен|
|A1|Свободен|
|A2|Свободен|
|A3|Свободен|
|A4 (SDA)|Свободен (I2C)|
|A5 (SCL)|Свободен (I2C)|
|A6|Свободен|
|A7|Свободен|

## Важные примечания

1. **Питание nRF24L01**: Модуль nRF24L01 требует стабильного питания 3.3V. Не используйте для него 5V, это может повредить модуль.

2. **Общие SPI линии**: И дисплей, и nRF24L01 используют одни и те же линии MOSI и SCK. Управление устройствами осуществляется через отдельные пины CS (D3 для дисплея и D10 для nRF24L01).

3. **Конденсаторы для стабилизации**: Для стабильной работы рекомендуется:

  - Добавить керамический конденсатор 4.7-10 мкФ между VCC и GND nRF24L01

  - Добавить керамические конденсаторы 0.1 мкФ между VCC и GND каждой микросхемы 74HC165

4. **Разделение земель**: Для уменьшения помех рекомендуется подключить все земли (GND) к общей точке.

5. **Потребляемый ток**: Убедитесь, что ваш источник питания может обеспечить достаточный ток для всех компонентов:

  - Arduino Nano: ~50 мА

  - 2 x 74HC165: ~20 мА

  - TFT-дисплей: ~100-200 мА (в зависимости от яркости)

  - nRF24L01: ~15 мА в режиме передачи

Эта конфигурация позволяет использовать все компоненты одновременно, используя аппаратный SPI Arduino Nano для работы с дисплеем и nRF24L01.

### Окончательная схема после устранения конфликтов:

|Компонент|Пин Arduino Nano|
|-|-|
|**74HC165 (2 шт)**||
|SH/LD|8|
|CLK|2|
|Данные (QH)|6|
|**TFT-дисплей**||
|CS|3|
|DC|4|
|RST|5|
|SCL|13|
|SDA|11|
|**nRF24L01**||
|CE|9|
|CSN|10|
|SCK|13|
|MOSI|11|
|MISO|12|
|**Джойстик 1**||
|VRX|A1|
|VRY|A0|
|SW|A2|
|**Джойстик 2**||
|VRX|A6|
|VRY|A7|
|SW|A3|
|**MPU-6050**||
|VCC|3.3V|
|GND|GND|
|SCL|A5|
|SDA|A4|
|**Вибромотор 1**||
|+|14 (A0)|
|-|GND|
|**Вибромотор 2**||
|+|15 (A1)|
|-|GND|
|**Динамик**||
|+|16 (A2)|
|-|GND|



